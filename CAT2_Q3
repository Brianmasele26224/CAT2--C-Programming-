#include <stdio.h>

void store_integers_to_file() {
    FILE *file;
    int num;
    int i;

    file = fopen("input.txt", "w");
    if (file == NULL) {
        printf("Error opening input.txt for writing.\n");
        return;
    }

    printf("Enter 10 integers:\n");
    for (i = 0; i < 10; i++) {
        printf("Integer %d: ", i + 1);
        while (scanf("%d", &num) != 1) {
            printf("Invalid input. Enter an integer: ");
            while (getchar() != '\n'); 
        }
        fprintf(file, "%d\n", num);
    }

    fclose(file);
    printf("Data saved to input.txt\n\n");
}

void process_and_write_results() {
    FILE *input_file, *output_file;
    int num, count = 0;
    long long sum = 0;
    double average;

    input_file = fopen("input.txt", "r");
    if (input_file == NULL) {
        printf("Error opening input.txt for reading.\n");
        return;
    }

    while (fscanf(input_file, "%d", &num) == 1) {
        sum += num;
        count++;
    }
    fclose(input_file);

    if (count == 0) {
        printf("input.txt contains no numbers.\n");
        return;
    }

    average = (double) sum / count;

    output_file = fopen("output.txt", "w");
    if (output_file == NULL) {
        printf("Error opening output.txt for writing.\n");
        return;
    }

    fprintf(output_file, "Total numbers: %d\n", count);
    fprintf(output_file, "Sum: %lld\n", sum);
    fprintf(output_file, "Average: %.2f\n", average);

    fclose(output_file);
    printf("Results written to output.txt\n\n");
}

void display_file_contents(const char *filename) {
    FILE *file;
    char line[256];

    file = fopen(filename, "r");
    if (file == NULL) {
        printf("Error opening %s for reading.\n", filename);
        return;
    }

    printf("Contents of %s:\n", filename);
    printf("-----------------------\n");

    while (fgets(line, sizeof(line), file) != NULL) {
        printf("%s", line);
    }

    printf("-----------------------\n\n");
    fclose(file);
}

int main() {
    store_integers_to_file();
    process_and_write_results();
    display_file_contents("input.txt");
    display_file_contents("output.txt");

    return 0;
}
